!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/common/http"),require("@angular/core"),require("lodash"),require("rxjs"),require("rxjs/operators"),require("@angular/router"),require("at-ng"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ng-tt",["exports","@angular/common","@angular/common/http","@angular/core","lodash","rxjs","rxjs/operators","@angular/router","at-ng","@angular/forms"],e):e((t=t||self)["ng-tt"]={},t.ng.common,t.ng.common.http,t.ng.core,t.lodash,t.rxjs,t.rxjs.operators,t.ng.router,t.atNg,t.ng.forms)}(this,function(t,e,n,a,o,r,i,c,s,p){"use strict";var l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function u(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var d=function(){return(d=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var g=new a.InjectionToken("tt-api-config"),h=(function(){function t(){}Object.defineProperty(t.prototype,"access_token",{get:function(){return this._access_token},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"token_type",{get:function(){return this._token_type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expires_in",{get:function(){return this._expires_in},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"created_at",{get:function(){return this._created_at},enumerable:!0,configurable:!0})}(),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.encodeKey=function(t){return encodeURIComponent(t)},e.prototype.encodeValue=function(t){return encodeURIComponent(this.serializeValue(t))},e.prototype.serializeValue=function(t){return o.isObject(t)?o.isDate(t)?t.toISOString():JSON.stringify(t):null===t||o.isUndefined(t)?"":t},e}(n.HttpUrlEncodingCodec)),m=function(){function t(t,e,n){this.http_client=t,this.platformId=e,this.api_config=n,this.apiConfig=n}return Object.defineProperty(t.prototype,"access_token",{get:function(){return e.isPlatformBrowser(this.platformId)?this._access_token||localStorage.getItem("access_token"):""},set:function(t){this._access_token=t,e.isPlatformBrowser(this.platformId)&&localStorage.setItem("access_token",t)},enumerable:!0,configurable:!0}),t.prototype.AUTH_HTTP_GET=function(t,e,a){return void 0===e&&(e={}),void 0===a&&(a=new n.HttpHeaders({"Content-Type":"application/json"})),this.http_client.get(t,{params:new n.HttpParams({encoder:new h,fromObject:e})})},t.prototype.AUTH_HTTP_DELETE=function(t,e,a){return void 0===e&&(e={}),void 0===a&&(a=new n.HttpHeaders({"Content-Type":"application/json"})),this.http_client["delete"](t,{params:new n.HttpParams({encoder:new h,fromObject:e})})},t.prototype.AUTH_HTTP_POST=function(t,e,a){void 0===e&&(e={}),void 0===a&&(a=new n.HttpHeaders({"Content-Type":"application/json"}));var o={headers:a};return this.http_client.post(t,e,o)},t.prototype.AUTH_HTTP_PUT=function(t,e,a){void 0===a&&(a=new n.HttpHeaders({"Content-Type":"application/json"}));var o={headers:a};return this.http_client.put(t,e,o)},t.prototype.AUTH_HTTP_UPLOAD_PUT=function(t,a,o,r){void 0===r&&(r=new n.HttpHeaders);JSON.parse(e.isPlatformBrowser(this.platformId)?localStorage.getItem("access_token"):this.access_token);r.set("Accept","application/json"),r.set("encrypt","multipart/form-data");var i={headers:r},c=this.objectToFormData(a,new FormData);return this.http_client.put(t,c,i)},t.prototype.AUTH_HTTP_UPLOAD_POST=function(t,a,o,r){void 0===r&&(r=new n.HttpHeaders);JSON.parse(e.isPlatformBrowser(this.platformId)?localStorage.getItem("access_token"):this.access_token);r.append("Accept","application/json");var i={headers:r},c=this.objectToFormData(a,new FormData);return this.http_client.post(t,c,i)},t.prototype.objectToFormData=function(t,e,n){var a,o;void 0===n&&(n="");var r,i=e||new FormData;if(t instanceof Array)try{for(var c=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(t),s=c.next();!s.done;s=c.next()){var p=s.value;"object"!=typeof p||p instanceof File?i.append(n+"[]",p):this.objectToFormData(p,i,n+"[]")}}catch(u){a={error:u}}finally{try{s&&!s.done&&(o=c["return"])&&o.call(c)}finally{if(a)throw a.error}}else for(var l in t)t.hasOwnProperty(l)&&(r=n?n+"["+l+"]":l,"object"!=typeof t[l]||t[l]instanceof File?i.append(r,t[l]):this.objectToFormData(t[l],i,r));return i},t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:n.HttpClient},{type:Object,decorators:[{type:a.Inject,args:[a.PLATFORM_ID]}]},{type:undefined,decorators:[{type:a.Inject,args:[g]}]}]},t.ngInjectableDef=a.ɵɵdefineInjectable({factory:function(){return new t(a.ɵɵinject(n.HttpClient),a.ɵɵinject(a.PLATFORM_ID),a.ɵɵinject(g))},token:t,providedIn:"root"}),t}(),f=new a.InjectionToken("tt_sign_out_url"),y=function(){function t(t,e,n){this.http=t,this.apiConfig=e,this.platformId=n,this.skip_url=[]}return Object.defineProperty(t.prototype,"access_token",{get:function(){return this._access_token||localStorage.getItem(this.apiConfig.tokenKey)},set:function(t){this._access_token=t,localStorage.setItem(this.apiConfig.tokenKey,t)},enumerable:!0,configurable:!0}),t.prototype.getToken=function(){var t=this.apiConfig.tokenUrl,e={headers:new n.HttpHeaders({"Content-Type":"application/json"})},a=this.apiConfig.apiUid,o=this.apiConfig.apiSecret,r=JSON.stringify({client_secret:o,client_id:a,grant_type:"client_credentials"});return this.http.post(t,r,e)},t.prototype.isRequestAliOss=function(t){var e=!1;return this.skip_url.forEach(function(n){t.startsWith(n)&&(e=!0)}),e},t.prototype.intercept=function(t,n){var a=this;if(-1!==t.url.indexOf(this.apiConfig.tokenUrl)||this.isRequestAliOss(t.url))return n.handle(t);var o=JSON.parse(e.isPlatformBrowser(this.platformId)?localStorage.getItem(this.apiConfig.tokenKey):this.access_token)||null;return null==o||o.var3+o.var2<(new Date).getTime()/1e3||"{}"===this.access_token||o==={}?r.from(this.getToken().toPromise()).pipe(i.switchMap(function(e){return a.access_token=JSON.stringify({session_key:e[a.apiConfig.tokenKey],var2:a.apiConfig.tokenExpiredIn,var3:new Date}),a.handleTokenReq(n,t)})):this.handleTokenReq(n,t)},t.prototype.handleTokenReq=function(t,e){var n={};this.apiConfig.tokenParams.forEach(function(t){n[t.name]=t.value()});var a={};if("GET"===e.method&&(a.setParams=d({},n)),e.body instanceof FormData){var o=e.body;this.apiConfig.tokenParams.forEach(function(t){o.append(t.name,t.value())}),a.body=o}else a.body=d({},e.body,n);var r=e.clone(d({},a));return t.handle(r)},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:n.HttpClient},{type:undefined,decorators:[{type:a.Inject,args:[g]}]},{type:Object,decorators:[{type:a.Inject,args:[a.PLATFORM_ID]}]}]},t}(),I=function(){function t(t,e){this.sign_out_url=t,this.router=e,this.skip_urls=["/api/oauth/token.json"]}return t.prototype.intercept=function(t,e){var a=this;return e.handle(t).pipe(i.filter(function(t){return t instanceof n.HttpResponse}),i.map(function(t){return a.skip_urls.find(function(e){return-1!==t.url.indexOf(e)})?t:t.clone({body:a.handleResponse(t)})}))},t.prototype.handleResponse=function(t){var e=t.body;return e.status&&"40100"===e.status.code&&(localStorage.clear(),this.router.navigate([this.sign_out_url]),{}),e.status&&e.status.code,e.status&&"20000"!==e.status.code?e:d({status:e.status},e.data)||e},t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:String,decorators:[{type:a.Inject,args:[f]}]},{type:c.Router}]},t}(),_=[{provide:n.HTTP_INTERCEPTORS,useClass:y,multi:!0},{provide:n.HTTP_INTERCEPTORS,useClass:I,multi:!0}],M=function(){function t(){}return t.config=function(e,n){return{ngModule:t,providers:[{provide:g,useValue:e},{provide:f,useValue:n}]}},t.decorators=[{type:a.NgModule,args:[{declarations:[],imports:[e.CommonModule]}]}],t}(),C=function(){function t(){this.t=""}return t.prototype.ngOnInit=function(){},t.decorators=[{type:a.Component,args:[{selector:"tt-i18n",template:"<span>{{ t |  I18n | async}}</span>"}]}],t.ctorParameters=function(){return[]},t.propDecorators={t:[{type:a.Input}]},t}(),v=new a.InjectionToken("tt-i18n"),b={locale:"zh-CN",Message:{no_data:"暂无数据",data_not_exist:"数据不存在",handle_success:"操作成功",confirm_delete:"确认删除?",handle_fail:"操作失败"},Button:{search:"搜索",reset:"重置",submit:"提交",create:"新增",more_filter:"更多筛选项"}},D=function(){function t(t){this._change=new r.BehaviorSubject(this._locale),this.setLocale(t||b)}return Object.defineProperty(t.prototype,"localChange",{get:function(){return this._change.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale=t},enumerable:!0,configurable:!0}),t.prototype.setLocale=function(t){this._locale=t,this._change.next(t)},t.prototype.translate=function(t,e){var n=this._getObjectPath(this._locale,t);return"string"==typeof n?(e&&Object.keys(e).forEach(function(t){return n=n.replace(new RegExp("%"+t+"%","g"),e[t])}),n):null},t.prototype._getObjectPath=function(t,e){for(var n=t,a=e.split("."),o=a.length,r=0;n&&r<o;)n=n[a[r++]];return r===o?n:null},t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:a.Inject,args:[v]}]}]},t.ngInjectableDef=a.ɵɵdefineInjectable({factory:function(){return new t(a.ɵɵinject(v))},token:t,providedIn:"root"}),t}();new a.Optional,new a.SkipSelf;var A=function(){function t(){this._page="1",this._per="10",this.editing_data={},this.checkIndexes=[],this.checkAll=!1,this.search_params={},this.search_columns=[],this.columns=[]}return Object.defineProperty(t.prototype,"page",{get:function(){return+this._page},set:function(t){this._page=t.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"per",{get:function(){return+this._per},set:function(t){this._per=t.toString()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.search=function(){this.loadData()},t.prototype.loadData=function(){},t.prototype.setData=function(t,e){this.datas=e[t]||[],this.checkIndexes=this.datas.map(function(t){return!1}),this.checkAll=!1,this.total_count=e.total_count,this.total_pages=e.total_pages},t.prototype.pageChange=function(t){this.page=t,this.loadData()},t.prototype.pageSizeChange=function(t){this.per=t,this.loadData()},Object.defineProperty(t.prototype,"send_param",{get:function(){return d({},this.search_params,{page:this._page,per:this._per})},enumerable:!0,configurable:!0}),t.prototype.edit=function(t){this.editing_data=t},t}(),w=function(t){function e(){var e=t.call(this)||this;return e.columns=[],e.Model="",e.resource="",e.search_columns=[],e.edit_columns=[],e.prefixRoute="/dashboard",e.search_params={},e.onSearch=new a.EventEmitter,e.search_paramsChange=new a.EventEmitter,e}return u(e,t),e.prototype.ngOnInit=function(){this.loadData()},e.prototype.loadData=function(){var t=this;this.data_service[this.resource](this.send_param).subscribe(function(e){t.setData(t.resource,e)})},e.prototype.search=function(){t.prototype.search.call(this),this.onSearch.emit()},e.prototype.changeSearchParams=function(){this.search_paramsChange.emit(this.search_params)},Object.defineProperty(e.prototype,"model",{get:function(){return this.Model.toLowerCase()},enumerable:!0,configurable:!0}),e.prototype.changeCheckIndex=function(t){this.checkAll=this.checkIndexes.filter(function(t){return!0===t}).length===this.datas.length},e.prototype.checkList=function(t){this.checkIndexes=this.checkIndexes.map(function(e){return t})},e.prototype.deleteAll=function(){},e.prototype.batchUpdate=function(t){var e=this,n=[];this.checkIndexes.forEach(function(a,o){if(!0===a){for(var r in t)""===t[r]&&delete t[r];var i=e.datas[o].id,c={update:t};c[e.model+"_id"]=i,n.push(e.data_service.update(c))}}),r.forkJoin(n).subscribe(function(t){console.log(t)})},e.decorators=[{type:a.Component,args:[{selector:"tt-common-data-table",template:'\n    <tt-search-group [search_columns]="search_columns" [extra_search]="extra_search" [(ngModel)]="search_params"\n                     (delete)="deleteAll()"\n                     (update)="batchUpdate($event)"\n                     [edit_columns]="edit_columns"\n                     (ngModelChange)="changeSearchParams()"\n                     (onSearch)="search()"></tt-search-group>\n    <at-table>\n      <thead at-thead>\n      <tr>\n        <th at-th [atWidth]="20">\n          <at-checkbox [(ngModel)]="checkAll" (changeCheck)="checkList($event)"></at-checkbox>\n        </th>\n        <th *ngFor="let item of columns" at-th style="cursor: text;">\n          <tt-i18n [t]="\'Model.\'+ Model+\'.\'+item.name"></tt-i18n>\n        </th>\n        <th at-th>操作</th>\n      </tr>\n      </thead>\n      <tbody at-tbody>\n      <tr at-tbody-tr *ngFor="let item of datas;let i = index">\x3c!----\x3e\n        <td at-td>\n          <at-checkbox [(ngModel)]="checkIndexes[i]" (changeCheck)="changeCheckIndex($event)"></at-checkbox>\n        </td>\n        <td at-td *ngFor="let column of columns">\n          <ng-container *ngIf="column.resource_key">\n            <a\n              [routerLink]="prefixRoute +\'/\'+column.resource +\'/\' + (item | nestedJsonKey : column.resource_key)">\n              {{item | nestedJsonKey : column.key}}</a>\n          </ng-container>\n          <ng-container *ngIf="!column.resource_key">\n            <ng-container *ngIf="column.array">\n              <ng-container\n                *ngFor="let column_array_item of  (item | nestedJsonKey : column.key);last as isLast">\n                <span>{{column.dictionary ? column.dictionary[column_array_item[column.array_key]] : column_array_item[column.array_key]}} </span>\n                <at-divider [vertical]="true" *ngIf="!isLast"></at-divider>\n              </ng-container>\n            </ng-container>\n            <ng-container *ngIf="!column.array">\n              {{column.dictionary ? column.dictionary[(item | nestedJsonKey : column.key)] : (item | nestedJsonKey : column.key)}}\n            </ng-container>\n          </ng-container>\n        </td>\n        <td at-td>\n          <a [routerLink]="prefixRoute +\'/\'+resource +\'/edit/\' + item.id">\n            <tt-i18n [t]="\'Model.Handle.edit\'"></tt-i18n>\n          </a>\n          <at-divider [vertical]="true" *ngIf="handle_columns"></at-divider>\n          <ng-template [ngTemplateOutlet]="handle_columns" [ngTemplateOutletContext]="{$implicit: item}"></ng-template>\n        </td>\n      </tr>\n      </tbody>\n      <div footer>\n        <tt-empty-data [data]="datas"></tt-empty-data>\n        <div class="page-container">\n          <at-pagination [atPageSizer]="true" (pageSizeChange)="pageSizeChange($event)" [pageSize]="per"\n                         [atQuickJump]="true"\n                         [atPageIndex]="page"\n                         [total]="total_count"\n                         (pageIndexChange)="pageChange($event)"></at-pagination>\n        </div>\n      </div>\n    </at-table>\n  ',styles:[""]}]}],e.ctorParameters=function(){return[]},e.propDecorators={data_service:[{type:a.Input}],columns:[{type:a.Input}],Model:[{type:a.Input}],resource:[{type:a.Input}],search_columns:[{type:a.Input}],edit_columns:[{type:a.Input}],handle_columns:[{type:a.Input}],extra_search:[{type:a.Input}],prefixRoute:[{type:a.Input}],search_params:[{type:a.Input}],onSearch:[{type:a.Output}],search_paramsChange:[{type:a.Output}]},e}(A),T=function(){function t(t){this._locale=t}return t.prototype.transform=function(t,e){var n=this,a=t.split("."),o=a[a.length-1];return this._locale.localChange.pipe(i.map(function(a){return n._locale.translate(t,e)||o}))},t.decorators=[{type:a.Pipe,args:[{name:"I18n"}]}],t.ctorParameters=function(){return[{type:D}]},t}(),x=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:s.AT_I18N,useValue:s.zh_CN},{provide:v,useValue:e}]}},t.decorators=[{type:a.NgModule,args:[{declarations:[T,C],imports:[e.CommonModule],exports:[T,C]}]}],t}();var k=function(){function t(){this.search_columns=[],this.search_params={},this.onSearch=new a.EventEmitter,this.update=new a.EventEmitter,this["delete"]=new a.EventEmitter,this.created_at_before="",this.created_at_after="",this.updated_at_before="",this.updated_at_after="",this.show_more=!1,this.range_keys={},this.edit_params={},this.visible=!1,this.edit_columns=[],this.onChange=function(){return null},this.onTouched=function(){return null}}return t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.writeValue=function(t){null!=t&&(this.search_params=t)},t.prototype.ngOnInit=function(){},t.prototype.search=function(){this.onSearch.emit()},t.prototype.close=function(){this.visible=!1},t.prototype.reset=function(){this.search_params={},this.created_at_before="",this.created_at_after="",this.updated_at_before="",this.updated_at_after="",this.range_keys={},this.onChange(this.search_params)},t.prototype.edit=function(){this.visible=!0},t.prototype.changeCreate=function(t,e){this.search_params["search[between_created_at]"]=this.created_at_before+","+this.created_at_after,this.onChange(this.search_params)},t.prototype.changeUpdate=function(t,e){this.search_params["search[between_updated_at]"]=this.updated_at_before+","+this.updated_at_after,this.onChange(this.search_params)},t.prototype.setRange=function(t,e,n){this.range_keys[e]||(this.range_keys[e]={before:"",after:""}),this.range_keys[e][n]=t,this.search_params["search[between_"+e+"]"]=this.range_keys[e].before+" , "+this.range_keys[e].after,this.onChange(this.search_params)},t.prototype.batchUpdate=function(){this.update.emit(this.edit_params),this.visible=!1},t.prototype.batchDelete=function(){this["delete"].emit()},t.decorators=[{type:a.Component,args:[{selector:"tt-search-group",template:'\n    <div at-row class="search-bar-container">\n      <ng-template [ngTemplateOutlet]="search_template"></ng-template>\n      <ng-template [ngTemplateOutlet]="extra_search"></ng-template>\n      <div at-col [span]="24">\n        <div style="margin-bottom: 24px">\n          <at-checkbox [label]="\'Button.more_filter\' | I18n | async" [(ngModel)]="show_more">\n          </at-checkbox>\n        </div>\n      </div>\n      <div *ngIf="show_more" at-col [span]="24">\n        <div at-row>\n          <div at-col [span]="11">\n            <at-form-item>\n              <div at-col [span]="11">\n                <div at-row>\n                  <div at-col [span]="24" class="search-label">\n                    <tt-i18n [t]="\'Model.Common.created_at\'"></tt-i18n>\n                  </div>\n                  <at-form-control [span]="24">\n                    <atDatetimePicker\n                      [inputIcon]="\'calendar\'"\n                      [(ngModel)]="created_at_before" [format]="\'YYYY-MM-DD\'"\n                      (ngModelChange)="changeCreate($event,\'after\')"\n                      [choice_modal]="\'date\'"></atDatetimePicker>\n                  </at-form-control>\n                </div>\n              </div>\n              <div at-col [span]="2" class="middle-line">\n                <at-divider [height]="3"></at-divider>\n              </div>\n              <div at-col [span]="11">\n                <div at-row>\n                  <div at-col class="search-label" [span]="24">\n                    <tt-i18n [t]="\'Model.Common.created_at\'"></tt-i18n>\n                  </div>\n                  <at-form-control [span]="24">\n                    <atDatetimePicker\n                      [inputIcon]="\'calendar\'"\n                      [(ngModel)]="created_at_after" [disableDate]="created_at_before"\n                      (ngModelChange)="changeCreate($event,\'after\')"\n                      [choice_modal]="\'date\'"\n                      [format]="\'YYYY-MM-DD\'"\n                    ></atDatetimePicker>\n                  </at-form-control>\n                </div>\n              </div>\n            </at-form-item>\n          </div>\n          <div at-col [span]="11" [offset]="1">\n            <at-form-item>\n              <div at-col [span]="11">\n                <div at-row>\n                  <div at-col [span]="24" class="search-label">\n                    <tt-i18n [t]="\'Model.Common.updated_at\'"></tt-i18n>\n                  </div>\n                  <at-form-control [span]="24">\n                    <atDatetimePicker\n                      [inputIcon]="\'calendar\'"\n                      [(ngModel)]="updated_at_before" [format]="\'YYYY-MM-DD\'"\n                      (ngModelChange)="changeUpdate($event,\'after\')"\n                      [choice_modal]="\'date\'"></atDatetimePicker>\n                  </at-form-control>\n                </div>\n              </div>\n              <div at-col [span]="2" class="middle-line">\n                <at-divider [height]="3"></at-divider>\n              </div>\n              <div at-col [span]="11">\n                <div at-row>\n                  <div at-col class="search-label" [span]="24">\n                    <tt-i18n [t]="\'Model.Common.updated_at\'"></tt-i18n>\n                  </div>\n                  <at-form-control [span]="24">\n                    <atDatetimePicker\n                      [inputIcon]="\'calendar\'"\n                      [(ngModel)]="updated_at_after" [disableDate]="updated_at_before"\n                      (ngModelChange)="changeUpdate($event,\'after\')"\n                      [choice_modal]="\'date\'"\n                      [format]="\'YYYY-MM-DD\'"\n                    ></atDatetimePicker>\n                  </at-form-control>\n                </div>\n              </div>\n            </at-form-item>\n          </div>\n        </div>\n      </div>\n\n      <div at-col [span]="24">\n        <div style="margin-bottom: 24px">\n          <button at-button (click)="search()" [atType]="\'primary\'">\n            <span><tt-i18n [t]="\'Button.search\'"></tt-i18n></span>\n          </button>\n          <at-divider [vertical]="true" [height]="20"></at-divider>\n          <button at-button (click)="reset()" [atType]="\'primary\'" hollow>\n            <span>\n        <tt-i18n [t]="\'Button.reset\'"></tt-i18n>\n      </span>\n          </button>\n          <at-divider [vertical]="true" [height]="20"></at-divider>\n          <button at-button (click)="edit()" [atType]="\'primary\'">\n            <span>批量编辑</span>\n          </button>\n          <ng-template [ngTemplateOutlet]="buttons"></ng-template>\n        </div>\n      </div>\n    </div>\n    \x3c!--<div at-row class="filter-container">--\x3e\n    \x3c!--<at-dropdown [trigger]="\'click\'" [autoClose]="false">--\x3e\n    \x3c!--<button at-dropdown at-button><span>筛选列表</span></button>--\x3e\n    \x3c!--<ul at-drop-menu-list>--\x3e\n    \x3c!--<li at-drop-menu-item *ngFor="let item of search_columns">--\x3e\n    \x3c!--{{ ("Model." + item.name) | I18n | async}}--\x3e\n    \x3c!--</li>--\x3e\n    \x3c!--</ul>--\x3e\n    \x3c!--</at-dropdown>--\x3e\n    \x3c!--</div>--\x3e\n\n    <at-drawer [atClosable]="true" [atVisible]="visible" (atOnClose)="close()" atPlacement="right" [atTitle]="drawer_title" [atWidth]="320">\n      <ng-template [ngTemplateOutlet]="edit_template"></ng-template>\n    </at-drawer>\n    <ng-template #drawer_title>\n      <button at-button (click)="batchUpdate()" [atType]="\'primary\'"> 批量更新</button>\n      \x3c!--<at-divider [vertical]="true" [height]="20"></at-divider>--\x3e\n      \x3c!--<button at-button (click)="batchDelete()" [atType]="\'error\'" hollow> 批量删除</button>--\x3e\n    </ng-template>\n\n    <ng-template #search_template let-item let-bind="bind">\n      <div *ngFor="let item of search_columns;let i =index" at-col [span]="item.type ===\'range\'? 11 : 5"\n           [offset]=" ((i) % 4) == 0 ? 0 : 1">\n        <at-form-item>\n          <div at-col [span]="24" class="search-label">\n            {{ ("Model." + item.name) | I18n | async}}\n          </div>\n          <at-form-control [span]="24">\n            <ng-container [ngSwitch]="item.type">\n              <input class="search-input" *ngSwitchCase="\'input\'" at-input\n                     [(ngModel)]="search_params[\'search[like_\'+item.key +\']\']">\n              <atInput class="search-input" *ngSwitchCase="\'number\'"\n                       [atType]="\'number\'"\n                       [(ngModel)]="search_params[\'search[\'+item.key +\']\']">\n              </atInput>\n              <at-select [multiple]="item.multiple" [(ngModel)]="search_params[\'search[\'+item.key +\']\'+ (item.multiple ? \'[]\' : \'\')]"\n                         *ngSwitchCase="\'select\'"\n                         style="width: 290px">\n                <at-option *ngIf="!item.multiple" [atLabel]="\'DataSource.all\' | I18n | async" [atValue]="\'\'"></at-option>\n                <at-option *ngFor="let option of  item.async ? (item.data_source | async) : item.data_source"\n                           [atLabel]="option.name"\n                           [atValue]="option.value">\n                </at-option>\n              </at-select>\n              <ng-container *ngSwitchCase="\'range\'">\n                <div at-row>\n                  <div at-col [span]="11">\n                    <atDatetimePicker [ngModel]="range_keys[item.key]?.before"\n                                      [inputIcon]="\'calendar\'"\n                                      (ngModelChange)="setRange($event,item.key,\'before\')"\n                                      [format]="\'YYYY-MM-DD HH:mm:ss\'"></atDatetimePicker>\n                  </div>\n                  <div at-col [span]="1" style="  left: 1%;position: relative">\n                    <at-divider [height]="3"></at-divider>\n                  </div>\n                  <div at-col [span]="11" [offset]="1">\n                    <atDatetimePicker [ngModel]="range_keys[item.key]?.after"\n                                      [inputIcon]="\'calendar\'"\n                                      (ngModelChange)="setRange($event,item.key,\'after\')"\n                                      [format]="\'YYYY-MM-DD HH:mm:ss\'"\n                                      [disableDate]="range_keys[item.key]?.before"></atDatetimePicker>\n                  </div>\n                </div>\n              </ng-container>\n            </ng-container>\n          </at-form-control>\n        </at-form-item>\n\n      </div>\n    </ng-template>\n\n    <ng-template #edit_template let-item let-bind="bind">\n      <div *ngFor="let item of edit_columns;let i =index" at-col [span]="24">\n        <at-form-item>\n          <div at-col [span]="24" class="search-label">\n            {{ ("Model." + item.name) | I18n | async}}\n          </div>\n          <at-form-control [span]="24">\n            <ng-container [ngSwitch]="item.type">\n              <input class="search-input" *ngSwitchCase="\'input\'" at-input\n                     [(ngModel)]="edit_params[item.key]">\n              <atInput class="search-input" *ngSwitchCase="\'number\'"\n                       [atType]="\'number\'"\n                       [(ngModel)]="edit_params[item.key]">\n              </atInput>\n              <at-select [multiple]="item.multiple" [(ngModel)]="edit_params[item.key]" *ngSwitchCase="\'select\'"\n                         style="width: 290px">\n                <at-option *ngIf="!item.multiple" [atLabel]="\'DataSource.all\' | I18n | async" [atValue]="\'\'"></at-option>\n                <at-option *ngFor="let option of  item.async ? (item.data_source | async) : item.data_source"\n                           [atLabel]="option.name"\n                           [atValue]="option.value">\n                </at-option>\n              </at-select>\n              <ng-container *ngSwitchCase="\'date\'">\n                <div at-row>\n                  <div at-col [span]="24">\n                    <atDatetimePicker [(ngModel)]="edit_params[item.key]"\n                                      [inputIcon]="\'calendar\'"\n                                      [format]="\'YYYY-MM-DD HH:mm:ss\'"></atDatetimePicker>\n                  </div>\n                </div>\n              </ng-container>\n            </ng-container>\n          </at-form-control>\n        </at-form-item>\n\n      </div>\n    </ng-template>\n  ',providers:[{provide:p.NG_VALUE_ACCESSOR,useExisting:a.forwardRef(function(){return t}),multi:!0}],styles:[".middle-line{padding-top:12px}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={search_columns:[{type:a.Input}],extra_form:[{type:a.Input}],onSearch:[{type:a.Output}],buttons:[{type:a.Input}],extra_search:[{type:a.Input}],update:[{type:a.Output}],"delete":[{type:a.Output}],edit_columns:[{type:a.Input}]},t}(),j=function(){function t(){this.data=[]}return t.prototype.ngOnInit=function(){},t.decorators=[{type:a.Component,args:[{selector:"tt-empty-data",template:'\n    <div *ngIf="(data || [] ).length === 0 || data === undefined || data === null" class="empty-data-box">\n      <div class="mb-empty-data">\n        <img\n          src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNjRweCIgaGVpZ2h0PSI0MXB4IiB2aWV3Qm94PSIwIDAgNjQgNDEiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjUgKDY3NDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NzIuMDAwMDAwLCAtMTMzNS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0LjAwMDAwMCwgMTExNC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnICB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MC4wMDAwMDAsIDc4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNjguMDAwMDAwLCAxNDQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxlbGxpcHNlICBmaWxsPSIjRjVGNUY1IiBjeD0iMzIiIGN5PSIzMyIgcng9IjMyIiByeT0iNyI+PC9lbGxpcHNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjAwMDAwMCwgMC4wMDAwMDApIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI0Q5RDlEOSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQ2LDEyLjc2MDU2MDQgTDM1Ljg1NDMwNDcsMS4yNTczOTYzMyBDMzUuMzY3NDQxNCwwLjQ3MzgyNjYwNSAzNC42NTU4Nzg5LDAgMzMuOTA2NzYxNywwIEwxMi4wOTMyMzgzLDAgQzExLjM0NDEyMTEsMCAxMC42MzI1NTg2LDAuNDczOTUwMjU1IDEwLjE0NTY5NTMsMS4yNTczOTYzMyBMMi42MTQ3OTcyN2UtMTIsMTIuNzYwNTYwNCBMMCwyMiBMNDYsMjIgTDQ2LDEyLjc2MDU2MDQgWiIgID48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTMyLjYxMzI4MTMsMTUuOTMxNSBDMzIuNjEzMjgxMywxNC4zMjU4NTExIDMzLjYwNjk1MzEsMTMuMDAwMjM0IDM0LjgzOTY5OTIsMTMgTDQ2LDEzIEw0NiwzMS4xMzcxMjc3IEM0NiwzMy4yNTg5NTc0IDQ0LjY3OTM4NjcsMzUgNDMuMDUwNDI5NywzNSBMMi45NDk1NzAzMSwzNSBDMS4zMjA1MjM0NCwzNSAwLDMzLjI1ODg0MDQgMCwzMS4xMzcxMjc3IEwwLDEzIEwxMS4xNjAzMDA4LDEzIEMxMi4zOTMwNDY5LDEzIDEzLjM4NjcxODgsMTQuMzIyODA4NSAxMy4zODY3MTg4LDE1LjkyODQ1NzQgTDEzLjM4NjcxODgsMTUuOTQ5NjM4MyBDMTMuMzg2NzE4OCwxNy41NTUyODcyIDE0LjM5MTcxMDksMTguODUxMTgwOSAxNS42MjQ0NTcsMTguODUxMTgwOSBMMzAuMzc1NTQzLDE4Ljg1MTE4MDkgQzMxLjYwODI4OTEsMTguODUxMTgwOSAzMi42MTMyODEzLDE3LjU0MzM1MTEgMzIuNjEzMjgxMywxNS45Mzc3MDIxIEwzMi42MTMyODEzLDE1LjkzMTUgWiIgIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"\n          alt="empty" class="ng-star-inserted">\n      </div>\n      <div>\n        <p class="empty-description">\n          <tt-i18n [t]="\'Message.no_data\'"></tt-i18n>\n        </p>\n      </div>\n    </div>',styles:[":host .mb-empty-data{width:100%;font-size:14px;line-height:22px;text-align:center}:host .empty-description{text-align:center;color:rgba(0,0,0,.45)}:host .empty-data-box{margin:32px 0}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={data:[{type:a.Input}]},t}(),O=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[k,j],imports:[p.FormsModule,x,s.AtModule,e.CommonModule],exports:[k,j]}]}],t}(),P=function(){function t(){}return t.prototype.transform=function(t,e){var n=t;return e.split(".").forEach(function(t){n=n[t]}),n},t.decorators=[{type:a.Pipe,args:[{name:"nestedJsonKey"}]}],t}(),N=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[w,P],imports:[s.AtModule,p.FormsModule,c.RouterModule,x,O,e.CommonModule],exports:[w]}]}],t}();t.CommonDataTableComponent=w,t.DataBaseComponent=A,t.HttpHelper=m,t.I18nService=D,t.TtComponentModule=O,t.TtDataTableModule=N,t.TtHttpModule=M,t.TtI18nComponent=C,t.TtI18nModule=x,t.TtInterceptorProviders=_,t.zhCN=b,t.ɵa=y,t.ɵb=g,t.ɵd=I,t.ɵe=f,t.ɵf=T,t.ɵg=D,t.ɵh=v,t.ɵj=C,t.ɵk=k,t.ɵl=j,t.ɵm=w,t.ɵn=A,t.ɵo=P,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng-tt.umd.min.js.map